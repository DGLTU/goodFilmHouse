import{B as z,C as A,e as p,o as u,g as c,a as e,t as o,u as t,b as B,F as V,h as I,i as n,w as $,K as N,J as h,p as U,d as k,L as M}from"./index-9c4cb3ea.js";import{_ as j,F as W}from"./FooterSection-da8de357.js";import{p as D}from"./api-c595d621.js";import{a as q,d as R,c as H,l as J,s as K,F as G,z as Q,b as f,E as b,S as X}from"./sweetalert2-1665cb35.js";const s=m=>(U("data-v-0532bfd7"),m=m(),k(),m),Y={class:"orderConfirm"},Z=s(()=>e("header",null,[e("div",{class:"mt-8 logo"},[B(" FILM HOUSE "),e("span",null,"好窩！電影之家")]),e("div",{class:"mt-4 progress"},[e("ul",null,[e("li",null,"選擇票種"),e("li",{class:"active"},"選擇位置"),e("li",{class:"active"},"確認訂單"),e("li",null,"訂單完成")])])],-1)),ee={class:"ticketInfo mt-4 px-4 py-8 flex items-center"},te={class:"ml-4"},se={class:"ml-16"},le={class:"flex items-center"},oe=s(()=>e("span",{class:"material-symbols-outlined"}," schedule ",-1)),ae={class:"flex items-center"},ne=s(()=>e("span",{class:"material-symbols-outlined"}," local_activity ",-1)),re={class:"my-4 table-wrap"},de={class:"ticketInfo-table"},ie=s(()=>e("thead",null,[e("tr",null,[e("th",null,"票種"),e("th",null,"價格"),e("th",null,"數量"),e("th",{class:"text-end"},"合計")])],-1)),ue={class:"flex justify-end"},ce=s(()=>e("th",null,"優惠折扣",-1)),me=s(()=>e("td",null,null,-1)),_e=s(()=>e("td",null,null,-1)),pe={class:"text-end"},he=s(()=>e("th",null,"合計",-1)),fe=s(()=>e("td",null,null,-1)),be=s(()=>e("td",null,null,-1)),ve={class:"font-extrabold text-end"},ye={class:"my-4 form-wrap"},ge=s(()=>e("h3",{class:"mb-4 border-b border-grey-light"},"購買人資訊",-1)),xe=s(()=>e("label",{for:"name",class:"form-label"},"訂購人姓名",-1)),Ve=s(()=>e("label",{for:"email",class:"form-label"},"Email信箱",-1)),Se=s(()=>e("label",{for:"tel",class:"form-label"},"手機號碼",-1)),Ce=s(()=>e("label",{for:"payment",class:"form-label"},"付款方式",-1)),we=s(()=>e("option",{value:"",selected:"",disabled:""},"請選擇付款方式",-1)),Oe=s(()=>e("option",{value:"信用卡"},"信用卡",-1)),Ee=s(()=>e("option",{value:"Paypal"},"PayPal",-1)),Fe=s(()=>e("option",{value:"LinePay"},"LinePay",-1)),Ie={class:"my-8 flex justify-between"},$e=["disabled"],qe={__name:"OrderConfirm",setup(m){Object.keys(q).forEach(d=>{R(d,q[d])}),H({generateMessage:J({zh_TW:Q}),validateOnInput:!0}),K("zh_TW");const S=z(),L=A(),{movie:i,movieDate:C,movieTime:_,seats:w,totalPrice:O,discount:P,cart:E}=L,v=p(),y=p(),g=p(),x=p();function T(){const d=M(),l={orderNumber:d,cart:E,totalPrice:O,seats:w,name:v.value,email:y.value,tel:x.value,payment:g.value,showTime:{date:C,startAt:_.startAt},movie:i};D(l).then(()=>{X.fire({icon:"success",title:"購票成功",showConfirmButton:!0,timer:1500}),S.push(`/orderComplete/${d}`)}).catch(()=>{})}function F(){T()}return(d,l)=>(u(),c(V,null,[e("div",Y,[Z,e("div",ee,[e("div",null,[e("h2",null,o(t(i).title),1),e("span",null,o(t(i).length.hours)+"小時"+o(t(i).length.min)+"分",1),e("span",te,o(t(i).grade),1)]),e("div",se,[e("p",le,[oe,B(" "+o(t(C))+" "+o(t(_).startAt.hour)+" : "+o(t(_).startAt.second===0?"00":t(_).startAt.second),1)]),e("p",ae,[ne,(u(!0),c(V,null,I(t(w),a=>(u(),c("div",{key:a,class:"mr-1"},o(a),1))),128))])])]),e("div",re,[e("table",de,[ie,e("tbody",null,[(u(!0),c(V,null,I(t(E),a=>(u(),c("tr",{key:a.name},[e("td",null,o(a.name),1),e("td",null,"$"+o(t(h)(a.price)),1),e("td",null,"x "+o(a.qty),1),e("td",ue,"$"+o(t(h)(a.price*a.qty)),1)]))),128))]),e("tfoot",null,[e("tr",null,[ce,me,_e,e("td",pe,"-$"+o(t(h)(t(P))),1)]),e("tr",null,[he,fe,be,e("td",ve,"$"+o(t(h)(t(O))),1)])])])]),e("div",ye,[n(t(G),{onSubmit:N(F,["prevent"])},{default:$(({meta:a})=>[ge,xe,n(t(f),{type:"text",name:"訂購人姓名",class:"form-control",id:"name",modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=r=>v.value=r),rules:"required"},null,8,["modelValue"]),n(t(b),{name:"訂購人姓名",class:"error"}),Ve,n(t(f),{type:"email",name:"Email",class:"form-control",id:"email",modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=r=>y.value=r),rules:"required|email"},null,8,["modelValue"]),n(t(b),{name:"Email",class:"error"}),Se,n(t(f),{type:"tel",name:"手機號碼",class:"form-control",id:"tel",modelValue:x.value,"onUpdate:modelValue":l[2]||(l[2]=r=>x.value=r),rules:{required:!0,regex:/^[0-9]{10}$/g}},null,8,["modelValue"]),n(t(b),{name:"手機號碼",class:"error"}),Ce,n(t(f),{as:"select",name:"付款方式",id:"payment",class:"form-control",modelValue:g.value,"onUpdate:modelValue":l[3]||(l[3]=r=>g.value=r),rules:"required"},{default:$(()=>[we,Oe,Ee,Fe]),_:1},8,["modelValue"]),n(t(b),{name:"付款方式",class:"error"}),e("div",Ie,[e("button",{class:"mb-4 btn-primary",type:"button",onClick:l[4]||(l[4]=r=>t(S).go(-1))},"上一步"),e("button",{class:"mb-4 btn-danger cursor-pointer",type:"submit",id:"openButton",disabled:!a.valid,onClick:l[5]||(l[5]=r=>F())}," 送出 ",8,$e)])]),_:1},8,["onSubmit"])])]),n(W)],64))}},ze=j(qe,[["__scopeId","data-v-0532bfd7"]]);export{ze as default};
