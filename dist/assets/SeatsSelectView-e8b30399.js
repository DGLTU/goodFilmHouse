import{B as D,C as w,e as C,f as E,o as n,g as o,a as t,u as i,b as O,t as h,F as u,h as f,I as V,i as G,n as v,p as H,d as I}from"./index-17db8f27.js";import{_ as N,F as L}from"./FooterSection-98ff3a73.js";import{b as M}from"./api-c595d621.js";const l=k=>(H("data-v-7952e513"),k=k(),I(),k),T={class:"seatsSelect"},j=l(()=>t("header",null,[t("div",{class:"mt-8 logo"},[O("FILM HOUSE "),t("span",null,"好窩！電影之家")]),t("div",{class:"mt-4 progress"},[t("ul",null,[t("li",null,"選擇票種"),t("li",{class:"active"},"選擇位置"),t("li",null,"確認訂單"),t("li",null,"訂單完成")])])],-1)),J={class:"mt-4 movie"},Q=["src"],U={class:"movie-text"},$={class:"movieGrade"},z=l(()=>t("div",{class:"mt-4 seatsMark"},[t("i",{class:"fa-solid fa-square"}),t("span",null,"可選位置"),t("i",{class:"fa-solid fa-square sold"}),t("span",null,"已售"),t("i",{class:"fa-solid fa-square selected"}),t("span",null,"您的位置")],-1)),R={class:"mt-4 flex justify-center"},K=l(()=>t("div",{class:"mt-4 screen"},[t("p",null,"Screen")],-1)),P=l(()=>t("tr",null,[t("th"),t("th",null,"1"),t("th",null,"2"),t("th",null,"3"),t("th",null,"4"),t("th",null,"5"),t("th",null,"6"),t("th",null,"7")],-1)),W=l(()=>t("th",null,"A",-1)),X=["data-seat"],Y=l(()=>t("th",null,"A",-1)),Z=l(()=>t("th",null,"B",-1)),tt=["data-seat"],st=l(()=>t("th",null,"B",-1)),et=l(()=>t("th",null,"C",-1)),lt=["data-seat"],at=l(()=>t("th",null,"C",-1)),nt=l(()=>t("th",null,"D",-1)),ot=["data-seat"],it=l(()=>t("th",null,"D",-1)),dt=l(()=>t("th",null,"E",-1)),ut=["data-seat"],rt=l(()=>t("th",null,"E",-1)),ct=l(()=>t("th",null,"F",-1)),_t=["data-seat"],ht=l(()=>t("th",null,"F",-1)),ft=l(()=>t("th",null,"G",-1)),vt=["data-seat"],pt=l(()=>t("th",null,"G",-1)),St=l(()=>t("th",null,"H",-1)),kt=["data-seat"],yt=l(()=>t("th",null,"H",-1)),gt={class:"my-8 flex justify-between"},mt={__name:"SeatsSelectView",setup(k){const b=D(),q=w(),{movie:p,movieDate:B,movieTime:y,seats:g,totalQty:x}=q,F=C(null),m=C([]),d=C([]),S=C(x),r=_=>{if(S.value===0){const{seat:s}=_.target.dataset;d.value.indexOf(s)===-1&&m.value.indexOf(s)===-1&&(d.value.shift(),d.value.push(s))}else{const{seat:s}=_.target.dataset;d.value.indexOf(s)===-1&&m.value.indexOf(s)===-1&&(d.value.push(s),S.value-=1)}},c=_=>{let s="";return m.value.indexOf(_)>-1?s="sold":d.value.indexOf(_)>-1&&(s="selected"),s},A=()=>{q.$patch({seats:d.value}),b.push("/orderConfirm")};return E(()=>{M(y.id).then(_=>{const{data:s}=_;F.value=JSON.parse(JSON.stringify(s[0])),m.value=F.value.booked}).catch(),g.length!==0&&(d.value=[...g],x>=g.length?S.value=x-g.length:d.value=[])}),(_,s)=>(n(),o(u,null,[t("div",T,[j,t("div",J,[t("img",{src:i(p).pictureUrls[0],alt:"",class:"img-center"},null,8,Q),t("div",U,[t("h2",null,[O(h(i(p).title)+" ",1),t("span",null,h(i(p).length.hours)+"小時"+h(i(p).length.min)+"分",1),t("span",$,h(i(p).grade),1)]),t("p",null,"日期："+h(i(B)),1),t("p",null," 時間："+h(i(y).startAt.hour)+" : "+h(i(y).startAt.second===0?"00":i(y).startAt.second),1)])]),z,t("h3",R,"還可選 "+h(S.value)+" 個",1),K,t("table",null,[P,t("tr",null,[W,(n(),o(u,null,f(7,e=>t("td",{key:e+"A"},[t("i",{class:v(["fa-solid fa-square",c(e+"A")]),"data-seat":e+"A",onClick:s[0]||(s[0]=a=>r(a))},null,10,X)])),64)),Y]),t("tr",null,[Z,(n(),o(u,null,f(7,e=>t("td",{key:e+"B"},[t("i",{class:v(["fa-solid fa-square",c(e+"B")]),"data-seat":e+"B",onClick:s[1]||(s[1]=a=>r(a))},null,10,tt)])),64)),st]),t("tr",null,[et,(n(),o(u,null,f(7,e=>t("td",{key:e+"C"},[t("i",{class:v(["fa-solid fa-square",c(e+"C")]),"data-seat":e+"C",onClick:s[2]||(s[2]=a=>r(a))},null,10,lt)])),64)),at]),t("tr",null,[nt,(n(),o(u,null,f(7,e=>t("td",{key:e+"D"},[t("i",{class:v(["fa-solid fa-square",c(e+"D")]),"data-seat":e+"D",onClick:s[3]||(s[3]=a=>r(a))},null,10,ot)])),64)),it]),t("tr",null,[dt,(n(),o(u,null,f(7,e=>t("td",{key:e+"E"},[t("i",{class:v(["fa-solid fa-square",c(e+"E")]),"data-seat":e+"E",onClick:s[4]||(s[4]=a=>r(a))},null,10,ut)])),64)),rt]),t("tr",null,[ct,(n(),o(u,null,f(7,e=>t("td",{key:e+"F"},[t("i",{class:v(["fa-solid fa-square",c(e+"F")]),"data-seat":e+"F",onClick:s[5]||(s[5]=a=>r(a))},null,10,_t)])),64)),ht]),t("tr",null,[ft,(n(),o(u,null,f(7,e=>t("td",{key:e+"G"},[t("i",{class:v(["fa-solid fa-square",c(e+"G")]),"data-seat":e+"G",onClick:s[6]||(s[6]=a=>r(a))},null,10,vt)])),64)),pt]),t("tr",null,[St,(n(),o(u,null,f(7,e=>t("td",{key:e+"H"},[t("i",{class:v(["fa-solid fa-square",c(e+"H")]),"data-seat":e+"H",onClick:s[7]||(s[7]=a=>r(a))},null,10,kt)])),64)),yt])]),t("div",gt,[t("button",{class:"mb-4 btn-primary",type:"button",onClick:s[8]||(s[8]=e=>i(b).go(-1))},"上一步"),S.value===0?(n(),o("button",{key:0,class:"mb-4 btn-primary",type:"button",onClick:A},"下一步")):V("",!0)])]),G(L)],64))}},qt=N(mt,[["__scopeId","data-v-7952e513"]]);export{qt as default};
