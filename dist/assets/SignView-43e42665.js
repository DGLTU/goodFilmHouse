import{B as C,j as z,e as i,o as w,g as V,a as s,i as l,w as F,K as y,u as a,F as B,p as $,d as j,b as M,W as p}from"./index-17db8f27.js";import{_ as T,F as W}from"./FooterSection-98ff3a73.js";import{l as N,s as O}from"./api-c595d621.js";import{a as U,d as R,c as A,l as L,s as H,F as I,z as K,b as d,E as u,S as P}from"./sweetalert2-c6fcda0b.js";const t=_=>($("data-v-a2648b5a"),_=_(),j(),_),D={class:"content"},G=t(()=>s("div",{class:"mt-8 logo"},[M(" FILM HOUSE "),s("span",null,"好窩！電影之家")],-1)),J=t(()=>s("img",{class:"img-center",src:"https://images.pexels.com/photos/7991318/pexels-photo-7991318.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},null,-1)),Q={class:"sign"},X={key:0,class:"sign-in"},Y=t(()=>s("h2",null,"登入會員",-1)),Z={class:"form-wrap"},ee=t(()=>s("label",{for:"email",class:"form-label"},"電子信箱 : ",-1)),se=t(()=>s("label",{for:"pwd",class:"form-label"},"密碼 : ",-1)),oe={class:"flex justify-end"},le={class:"btn"},ae=["disabled"],te={key:1,class:"sign-up"},re=t(()=>s("h2",null,"註冊會員",-1)),ne={class:"form-wrap"},ie=t(()=>s("label",{for:"name",class:"form-label"},"姓名 : ",-1)),de=t(()=>s("label",{for:"email",class:"form-label"},"電子信箱 : ",-1)),ue=t(()=>s("label",{for:"pwd",class:"form-label"},"密碼 : ",-1)),me=t(()=>s("label",{for:"pwd",class:"form-label"},"再次輸入密碼 : ",-1)),ce=t(()=>s("label",{for:"tel",class:"form-label"},"手機號碼 : ",-1)),pe={class:"btn"},fe=["disabled"],_e={__name:"SignView",setup(_){Object.keys(U).forEach(r=>{R(r,U[r])}),A({generateMessage:L({zh_TW:K}),validateOnInput:!0}),H("zh_TW");const k=C(),S=z(),x=i(!1),v=i(),m=i(),c=i(),E=i(),b=i(),h=i();function f(r,e="success"){P.fire({icon:e,title:r,showConfirmButton:!0})}function g(){const r={email:m.value,password:c.value};N(r).then(()=>{const e=p("token"),n=p("id"),o=p("role");S.$patch({token:e,id:n,role:o}),f("登入成功! 歡迎回來"),k.push("/")}).catch(()=>{v.value.resetForm(),f("登入資訊有誤，請重新登入","warning")})}function q(){const r={email:m.value,password:c.value,tel:h.value,name:b.value};O(r).then(()=>{const e=p("token"),n=p("id"),o=p("role");S.$patch({token:e,id:n,role:o}),f("註冊成功! 歡迎加入好窩!"),v.value.resetForm(),k.push("/")}).catch(e=>{switch(e.response.data){case"Email already exists":f("此電子信箱已被使用，請重新註冊","error");break;case"Password is too short":f("密碼長度過短，請輸入至少4位英數字","error");break}})}return(r,e)=>(w(),V(B,null,[s("div",D,[G,J,s("div",Q,[x.value?(w(),V("div",te,[re,s("div",ne,[l(a(I),{onSubmit:y(g,["prevent"]),ref_key:"form",ref:v},{default:F(({meta:n})=>[ie,l(a(d),{type:"text",name:"姓名",id:"name",class:"form-control",modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=o=>b.value=o),rules:"required"},null,8,["modelValue"]),l(a(u),{name:"姓名",class:"error"}),de,l(a(d),{type:"email",name:"Email",id:"email",class:"form-control",modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=o=>m.value=o),rules:"required|email"},null,8,["modelValue"]),l(a(u),{name:"Email",class:"error"}),ue,l(a(d),{type:"password",name:"密碼",id:"pwd",class:"form-control",modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=o=>c.value=o),rules:"required"},null,8,["modelValue"]),l(a(u),{name:"密碼",class:"error"}),me,l(a(d),{type:"password",name:"再次輸入密碼",id:"pwd",class:"form-control",modelValue:E.value,"onUpdate:modelValue":e[6]||(e[6]=o=>E.value=o),rules:"required|confirmed:@密碼"},null,8,["modelValue"]),l(a(u),{name:"再次輸入密碼",class:"error"}),ce,l(a(d),{type:"tel",name:"手機號碼",class:"form-control",id:"tel",modelValue:h.value,"onUpdate:modelValue":e[7]||(e[7]=o=>h.value=o),rules:{required:!0,regex:/^[0-9]{10}$/g}},null,8,["modelValue"]),l(a(u),{name:"手機號碼",class:"error"}),s("div",pe,[s("button",{type:"button",class:"mt-8 btn-danger",disabled:!n.valid,onClick:e[8]||(e[8]=o=>q())},"註冊會員",8,fe)])]),_:1},8,["onSubmit"])])])):(w(),V("div",X,[Y,s("div",Z,[l(a(I),{onSubmit:y(g,["prevent"]),ref_key:"form",ref:v},{default:F(({meta:n})=>[ee,l(a(d),{type:"email",name:"Email",id:"email",class:"form-control",modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=o=>m.value=o),rules:"required|email"},null,8,["modelValue"]),l(a(u),{name:"Email",class:"error"}),se,l(a(d),{type:"password",name:"密碼",id:"pwd",class:"form-control",modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=o=>c.value=o),rules:"required"},null,8,["modelValue"]),l(a(u),{name:"密碼",class:"error"}),s("div",oe,[s("a",{href:"",class:"text-sm underline text-blue-500",onClick:e[2]||(e[2]=y(o=>x.value=!0,["prevent"]))},"我要註冊")]),s("div",le,[s("button",{type:"button",class:"mt-8 btn-danger",onClick:g,disabled:!n.valid},"登入",8,ae)])]),_:1},8,["onSubmit"])])]))])]),l(W)],64))}},we=T(_e,[["__scopeId","data-v-a2648b5a"]]);export{we as default};
